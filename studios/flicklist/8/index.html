<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Studio: FlickList 8 :: Unit 2: Web Fundamentals</title>

        <link rel="stylesheet" href="https://education.launchcode.org/web-fundamentals/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://education.launchcode.org/web-fundamentals/css/highlight.launchcode.css">
        <link rel="stylesheet" href="https://education.launchcode.org/web-fundamentals/css/main.css">
        <link rel="stylesheet" href="https://djwbyvgln9kts.cloudfront.net/launch_ed_style/custom.css">
    </head>
    <body id='page-studio-flicklist-8'>

        <header class="navbar navbar-default navbar-fixed-top">

            <ul class="nav navbar-nav">

                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle glyphicon glyphicon-menu-hamburger" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"></a>
                        <ul class="dropdown-menu">
                                                            <li class=" lc-button">
                                    <a href="https://education.launchcode.org/web-fundamentals/classes/">
                                        Classes
                                    </a>
                                </li>
                                                            <li class="active lc-button">
                                    <a href="https://education.launchcode.org/web-fundamentals/studios/">
                                        Studios
                                    </a>
                                </li>
                                                            <li class=" lc-button">
                                    <a href="https://education.launchcode.org/web-fundamentals/tutorials/">
                                        Tutorials
                                    </a>
                                </li>
                                                            <li class=" lc-button">
                                    <a href="https://education.launchcode.org/web-fundamentals/assignments/">
                                        Assignments
                                    </a>
                                </li>
                                                            <li class=" lc-button">
                                    <a href="https://education.launchcode.org/web-fundamentals/videos/">
                                        Videos
                                    </a>
                                </li>
                                                            <li class=" lc-button">
                                    <a href="https://education.launchcode.org/web-fundamentals/cheatsheets/">
                                        Cheatsheets
                                    </a>
                                </li>
                                                            <li class=" lc-button">
                                    <a href="https://education.launchcode.org/web-fundamentals/objectives/">
                                        Objectives
                                    </a>
                                </li>
                                                            <li class=" lc-button">
                                    <a href="https://education.launchcode.org/web-fundamentals/issues/">
                                        Issues
                                    </a>
                                </li>
                                                            <li class=" lc-button">
                                    <a href="https://education.launchcode.org/web-fundamentals/about/">
                                        About this Unit
                                    </a>
                                </li>
                                                        <li role="separator" class="divider"></li>
                            <li>
                                <a href="#modalSearch" data-toggle="modal" data-target="#modalSearch">Search This Site</a>
                            </li>
                        </ul>
                    </li>

                
            </ul>

            <div>
                <a class="navbar-brand site-title navbar-center" href="https://education.launchcode.org/web-fundamentals/">
                    <h1>Unit 2: Web Fundamentals</h1>
                </a>
            </div>

            <div class="nav navbar-nav navbar-right">
                <a class="navbar-brand dabomb" href="https://education.launchcode.org/web-fundamentals/"></a>
            </div>

        </header>

        <!-- Search Modal -->
        <div id="modalSearch" class="modal fade" role="dialog">
           <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                   <button type="button" class="close" data-dismiss="modal">&times;</button>
                   <h4 class="modal-title">Search Unit 2: Web Fundamentals</h4>
                </div>
                <div class="modal-body">
                    <script>
                      (function() {
                        var cx = "014657181352409571810:wecoswt6tpe";
                        var gcse = document.createElement('script');
                        gcse.type = 'text/javascript';
                        gcse.async = true;
                        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
                        var s = document.getElementsByTagName('script')[0];
                        s.parentNode.insertBefore(gcse, s);
                      })();
                    </script>
                    <gcse:search></gcse:search>
                </div>
                <div class="modal-footer">
                   <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>

           </div>
        </div>

        <main class="container-fluid">
            <div class="row">

                <section id="content" class="col-sm-offset-2 col-sm-8">
                                        <h1>Studio: FlickList 8</h1>
                    <p>This studio has a different structure than past Flicklist studios. Instead of watching an instructor-led walkthrough and then tackling a problem on your own, you will be given tasks to add new features to the application straightaway. This will allow you to apply more of the concepts you've learned in class on your own.</p>
<h2 id="studio">Studio</h2>
<p>Our app at this point has user accounts and login, but users are still collaboratively editing the same list of movies. We need to fix that:</p>
<ul>
<li>We'll add relationships between the <code>Movie</code> and <code>User</code> classes, so that each movie &quot;belongs to&quot; a specific user.</li>
<li>We'll refactor the code so that it is cleaner and more reusable, in line with the <em>MVC</em> pattern.</li>
<li>We will update the <code>/</code> and <code>/ratings</code> page so that a user only sees a list of movies of which she is the owner.</li>
</ul>
<h3 id="checking-out-the-studio-code">Checking Out the Studio code</h3>
<p>Follow the <a href="../getting-the-code/">instructions for getting the code</a> in order to get the starter code for <code>studio8</code>.</p>
<h3 id="your-tasks">Your Tasks</h3>
<p>Notice that we are no longer littering your studio code with <code>TODO</code>s. Your instructions for the tasks you need to fulfill will be here in this section.</p>
<ol>
<li>
<p>Add a column to the <code>User</code> class representing its relationship to the <code>Movie</code> class. And add a property to the <code>Movie</code> class that holds the id of the owner. Review the relevant <a href="../../../videos/get-it-done/user-task-relationship/"><em>Get it Done!</em> video lesson</a> if you need a reminder of the process. Remember that you will have to drop and re-create tables after making these changes. While you're in the python session that does this, make sure to manually add a user to the database (since you lost all the records you added previously after dropping the tables).</p>
</li>
<li>
<p>Given what you learned about the MVC pattern, refactor your code accordingly:</p>
<ul>
<li><strong>Model:</strong>  Move the <code>User</code> and <code>Movie</code> classes to a file named <code>models.py</code>. Then refactor out the app and database configuration code to a file named <code>app.py</code>. Specifically, the <code>app.py</code> file will have these 7 lines:</li>
</ul>
<pre><code class="language-python">from flask import Flask
from flask_sqlalchemy import SQLAlchemy

app = Flask(__name__)
app.config['DEBUG'] = True      # displays runtime errors in the browser, too
app.config['SQLALCHEMY_DATABASE_URI'] = 'mysql+pymysql://flicklist:MyNewPass@localhost:8889/flicklist'
app.config['SQLALCHEMY_ECHO'] = True

db = SQLAlchemy(app)</code></pre>
<ul>
<li><strong>View:</strong> Your view code is already contained in your template files; no need to do anything further.</li>
<li><strong>Controller:</strong> Now the code that remains in your <code>main.py</code> file is the controller code.</li>
<li><strong>Add import code:</strong> You will need to import <code>db</code> from <code>app.py</code> in the <code>models.py</code> file in order for the code in that file to function. And now, in order for <code>main.py</code> to utilize the <code>User</code> and <code>Movie</code> classes, you will need to import them into <code>main.py</code>. Finally, you will need to import <code>app</code> and <code>db</code> from <code>app.py</code> into <code>main.py</code>.</li>
</ul>
</li>
<li>When the user visits the <code>/</code> and <code>/ratings</code> pages showing the unwatched and watched movies, she still sees <em>everybody's</em> movies. Fix it so that she only sees <em>her own</em> unwatched and watched movies. Also, you'll need to change the code to add a movie to the watchlist so that you assign an <code>owner</code> to the <code>movie</code> object.</li>
</ol>
                                    </section>

            </div>
        </main>

        <script type="text/javascript" src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
        <script type="text/javascript" src="https://education.launchcode.org/web-fundamentals/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="https://education.launchcode.org/web-fundamentals/js/highlight.pack.js"></script>
        <script type="text/javascript" src="https://education.launchcode.org/web-fundamentals/js/libgif.js"></script>

        <script>
            $(function() {
                $("section>h1").wrap('<div class="page-header" />');

                // Syntax highlighting
                hljs.configure({ displayLabels: true });
                hljs.initHighlightingOnLoad();
            });
        </script>

        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', "UA-78748330-3", 'auto');
            ga('send', 'pageview');

        </script>

    </body>
</html>
